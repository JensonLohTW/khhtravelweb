* {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  -moz-user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
  -ms-text-size-adjust: none;
  -moz-text-size-adjust: none;
  -webkit-text-size-adjust: none;
  text-size-adjust: none;
  -webkit-user-drag: none;
  -webkit-touch-callout: none;
  -ms-content-zooming: none;
  -webkit-tap-highlight-color: rgba(0,0,0,0);
}

html, body {
  width: 100%;
  height: 100%;
  padding: 0;
  margin: 0;
  overflow: hidden;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-size: 16px;
  background-color: #000;
  color: #fff;
}

a, a:hover, a:active, a:visited {
  text-decoration: none;
  color: inherit;
}

#pano {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

#titleBar {
  position: absolute;
  top: 0;
  left: 0;
  right: 120px;
  height: 40px;
  text-align: center;
  z-index: 10;
}

.mobile #titleBar {
  height: 50px;
  right: 150px;
}

/* If there is a fullscreen button the title bar must make space for it */
body.fullscreen-enabled #titleBar {
  right: 160px;
}

body.fullscreen-enabled.mobile #titleBar {
  right: 200px;
}

/* If there are multiple scenes the title bar must make space for the scene list toggle */
body.multiple-scenes #titleBar {
  left: 40px;
}

body.multiple-scenes.mobile #titleBar {
  left: 50px;
}

#titleBar .sceneName {
  /* 尺寸與佈局 */
  width: 100%;
  height: 100%;
  line-height: 30px;
  padding: var(--spacing-2) var(--spacing-4);

  /* 現代化視覺樣式 */
  background: var(--color-surface-base);
  backdrop-filter: var(--blur-md);
  -webkit-backdrop-filter: var(--blur-md);

  /* 邊框與陰影 */
  border-bottom: 1px solid var(--color-border-base);
  box-shadow: var(--shadow-sm);

  /* 文字樣式 */
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);

  /* 文字溢出處理 */
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;

  /* 文字選取 */
  -moz-user-select: text;
  -webkit-user-select: text;
  -ms-user-select: text;
  user-select: text;

  /* 過渡效果 */
  transition: all var(--duration-base) var(--easing-standard);
}

.mobile #titleBar .sceneName {
  line-height: 40px;
  font-size: var(--font-size-lg);
  padding: var(--spacing-3) var(--spacing-4);
}

/* ============================================
   統一控制按鈕樣式（使用設計令牌）
   ============================================ */

/* === 基礎按鈕類別 === */
.control-button {
  /* 佈局 */
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;

  /* 尺寸 */
  width: var(--size-button-base);
  height: var(--size-button-base);
  padding: var(--spacing-1);

  /* 視覺樣式 */
  background: var(--color-surface-base);
  backdrop-filter: var(--blur-md);
  -webkit-backdrop-filter: var(--blur-md);

  border: 1px solid var(--color-border-base);
  border-radius: var(--radius-base);

  color: var(--color-text-primary);

  /* 防止文字選取 */
  -moz-user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;

  /* 陰影層次 */
  box-shadow: var(--shadow-md),
              0 0 0 1px rgba(255, 255, 255, 0.05) inset;

  /* 互動 */
  cursor: pointer;
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;

  /* 過渡動畫 */
  transition: all var(--duration-base) var(--easing-standard);

  /* 防止文字選取和拖曳 */
  -webkit-user-drag: none;
  -webkit-tap-highlight-color: rgba(0,0,0,0);
}

/* Hover 狀態（僅桌面） */
.no-touch .control-button:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-border-hover);
  transform: translateY(-1px);
  box-shadow: var(--shadow-lg),
              0 0 0 1px rgba(255, 255, 255, 0.08) inset;
}

/* Active 狀態 */
.control-button:active {
  transform: translateY(0) scale(0.98);
  box-shadow: var(--shadow-base);
}

/* Focus 狀態（鍵盤導航） */
.control-button:focus {
  outline: none;
  border-color: var(--color-border-focus);
  box-shadow: var(--shadow-lg),
              0 0 0 3px rgba(251, 191, 36, 0.2);
}

/* Focus Visible（現代瀏覽器） */
.control-button:focus-visible {
  outline: 2px solid var(--color-border-focus);
  outline-offset: 2px;
  border-color: var(--color-border-focus);
  box-shadow: var(--shadow-lg),
              0 0 0 4px rgba(251, 191, 36, 0.15);
}

/* 啟用/開啟狀態 */
.control-button.enabled {
  background: linear-gradient(135deg,
              rgba(251, 191, 36, 0.2),
              rgba(245, 158, 11, 0.15));
  border-color: rgba(251, 191, 36, 0.4);
  box-shadow: var(--shadow-md),
              0 0 0 1px rgba(251, 191, 36, 0.1) inset;
}

.no-touch .control-button.enabled:hover {
  background: linear-gradient(135deg,
              rgba(251, 191, 36, 0.3),
              rgba(245, 158, 11, 0.25));
  border-color: rgba(251, 191, 36, 0.5);
}

/* 行動裝置適配 */
.mobile .control-button {
  width: var(--size-button-lg);
  height: var(--size-button-lg);
  padding: var(--spacing-2);
}

/* 禁用狀態 */
.control-button:disabled {
  opacity: var(--opacity-50);
  cursor: not-allowed;
  pointer-events: none;
}

/* 圖標容器 */
.control-button .icon {
  position: relative;
  width: var(--size-icon-lg);
  height: var(--size-icon-lg);
  transition: opacity var(--duration-base) var(--easing-standard);
}

.mobile .control-button .icon {
  width: var(--size-icon-xl);
  height: var(--size-icon-xl);
}

/* 圖標狀態切換 */
.control-button .icon.on {
  display: none;
}

.control-button .icon.off {
  display: block;
}

.control-button.enabled .icon.on {
  display: block;
}

.control-button.enabled .icon.off {
  display: none;
}

/* 減少動畫偏好 */
@media (prefers-reduced-motion: reduce) {
  .control-button,
  .control-button .icon {
    transition: none;
  }

  .no-touch .control-button:hover {
    transform: none;
  }
}

/* 高對比度模式 */
@media (prefers-contrast: high) {
  .control-button {
    border-width: 2px;
  }

  .control-button:focus,
  .control-button:focus-visible {
    outline-width: 3px;
  }
}

/* === QR 按鈕特殊樣式（與 QR 模組保持一致）=== */
.control-button--qr {
  /* 特殊背景色（藍色調） */
  background: rgba(59, 130, 246, 0.15);
  border-color: rgba(59, 130, 246, 0.25);

  /* 字體樣式 */
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-bold);
  letter-spacing: var(--letter-spacing-wide);
}

.no-touch .control-button--qr:hover {
  background: rgba(59, 130, 246, 0.25);
  border-color: rgba(59, 130, 246, 0.35);
}

.control-button--qr:focus,
.control-button--qr:focus-visible {
  border-color: rgba(59, 130, 246, 0.5);
  box-shadow: var(--shadow-lg),
              0 0 0 3px rgba(59, 130, 246, 0.2);
}

.mobile .control-button--qr {
  font-size: var(--font-size-base);
}

/* ============================================
   控制按鈕定位（視覺樣式由 .control-button 提供）
   ============================================ */

/* === 全螢幕切換按鈕 === */
#fullscreenToggle {
  display: none;
  position: absolute;
  top: 0;
  right: 40px;
  z-index: 30;
}

.mobile #fullscreenToggle {
  width: 50px;
  height: 50px;
  right: 50px;
}

body.fullscreen-enabled #fullscreenToggle {
  display: block;
}

/* === 自動旋轉切換按鈕 === */
#autorotateToggle {
  display: block;
  position: absolute;
  top: 0;
  right: 40px;
  z-index: 30;
}

.mobile #autorotateToggle {
  width: 50px;
  height: 50px;
  right: 50px;
}

/* If there is a fullscreen button, autorotate must placed a bit to the left */
body.fullscreen-enabled #autorotateToggle {
  right: 80px;
}

body.fullscreen-enabled.mobile #autorotateToggle {
  right: 100px;
}

/* === 場景列表切換按鈕 === */
#sceneListToggle {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 50;
}

.mobile #sceneListToggle {
  width: 50px;
  height: 50px;
}

#sceneList {
  /* 定位 */
  position: absolute;
  top: 0;
  left: 0;
  z-index: 40;

  /* 尺寸 */
  padding-top: 40px;
  width: 220px;
  max-height: 100%;

  /* 滾動 */
  overflow-x: hidden;
  overflow-y: auto;

  /* 使用 transform 取代 margin-left（效能更好）*/
  transform: translateX(-220px);
  -webkit-transition: transform var(--duration-slow) var(--easing-emphasized);
  transition: transform var(--duration-slow) var(--easing-emphasized);
}

#sceneList.enabled {
  transform: translateX(0);
}

.mobile #sceneList {
  padding-top: 50px;
  width: 100%;
  height: 100%;
  transform: translateX(-100%);
}

.mobile #sceneList.enabled {
  transform: translateX(0);
}

#sceneList .scenes {
  /* 尺寸 */
  width: 100%;

  /* 現代化視覺樣式 */
  background: var(--color-surface-base);
  backdrop-filter: var(--blur-md);
  -webkit-backdrop-filter: var(--blur-md);

  /* 邊框與陰影 */
  border-right: 1px solid var(--color-border-base);
  box-shadow: var(--shadow-lg);
}

.mobile #sceneList .scenes {
  height: 100%;
}

#sceneList .scene {
  display: block;
  width: 100%;
  height: 30px;
}

#sceneList .sceneListActions {
  display: none;
  padding: var(--spacing-2) var(--spacing-3);
  background: rgba(30, 33, 41, 0.95);
  border-bottom: 1px solid var(--color-border-base);
  backdrop-filter: var(--blur-sm);
  -webkit-backdrop-filter: var(--blur-sm);
}

body.dev-mode #sceneList .sceneListActions {
  display: block;
}

#sceneList .sceneListActions .devOnlyButton {
  width: 100%;
  padding: var(--spacing-2) var(--spacing-3);
  background: var(--color-surface-base);
  color: var(--color-text-primary);
  border: 1px solid var(--color-border-base);
  border-radius: var(--radius-sm);
  font: inherit;
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all var(--duration-fast) var(--easing-standard);
}

#sceneList .sceneListActions .devOnlyButton:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-border-hover);
  transform: translateY(-1px);
  box-shadow: var(--shadow-sm);
}

#sceneList .sceneListActions .devOnlyButton:active {
  transform: translateY(0);
}

.mobile #sceneList .scene {
  height: 40px;
}

#sceneList .scene .text {
  /* 尺寸與佈局 */
  width: 100%;
  height: 100%;
  padding: 0 var(--spacing-4);
  line-height: 30px;

  /* 文字樣式 */
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);

  /* 文字溢出處理 */
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;

  /* 過渡效果 */
  transition: color var(--duration-fast) var(--easing-standard);
}

#sceneList .scene .sceneNameEditorInput {
  width: 100%;
  height: 100%;
  padding: 0 var(--spacing-3);
  line-height: 30px;
  box-sizing: border-box;
  border: 1px solid var(--color-border-focus);
  background-color: rgba(0, 0, 0, 0.3);
  color: var(--color-text-primary);
  font: inherit;
}

.mobile #sceneList .scene .text {
  line-height: 40px;
  font-size: var(--font-size-base);
}

.mobile #sceneList .scene .sceneNameEditorInput {
  line-height: 40px;
}

.no-touch #sceneList .scene:hover {
  background: var(--color-surface-hover);
  border-left: 3px solid var(--color-primary-400);
  padding-left: calc(var(--spacing-1) - 3px);
}

.no-touch #sceneList .scene:hover .text {
  color: var(--color-text-primary);
}

#sceneList .scene.current {
  background: linear-gradient(
    90deg,
    rgba(251, 191, 36, 0.2) 0%,
    rgba(245, 158, 11, 0.1) 100%
  );
  border-left: 3px solid var(--color-primary-500);
  padding-left: calc(var(--spacing-1) - 3px);
}

#sceneList .scene.current .text {
  color: var(--color-primary-400);
  font-weight: var(--font-weight-semibold);
}

/* 自定義滾動條樣式（場景列表）*/
#sceneList::-webkit-scrollbar {
  width: 8px;
}

#sceneList::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.2);
}

#sceneList::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: var(--radius-sm);
  transition: background var(--duration-fast) var(--easing-standard);
}

#sceneList::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* Firefox 滾動條樣式 */
#sceneList {
  scrollbar-width: thin;
  scrollbar-color: rgba(255, 255, 255, 0.2) rgba(0, 0, 0, 0.2);
}

/* Hide scene list when only a single scene exists */
body.single-scene #sceneList, body.single-scene #sceneListToggle {
  display: none;
}

/* ============================================
   Link Hotspot（導航熱點）
   ============================================ */

.link-hotspot {
  /* 尺寸 */
  width: 60px;
  height: 60px;
  margin-left: -30px;
  margin-top: -30px;

  /* 視覺樣式 */
  opacity: 0.9;

  /* 過渡效果 */
  -webkit-transition: opacity var(--duration-fast) var(--easing-standard);
  transition: opacity var(--duration-fast) var(--easing-standard);
}

.no-touch .link-hotspot:hover {
  opacity: 1;
  -webkit-transition: opacity var(--duration-base) var(--easing-standard);
  transition: opacity var(--duration-base) var(--easing-standard);
}

.mobile .link-hotspot {
  width: 70px;
  height: 70px;
}

.link-hotspot-icon {
  width: 100%;
  height: 100%;
  cursor: pointer;
  transition: transform var(--duration-fast) var(--easing-standard);
}

.no-touch .link-hotspot:hover .link-hotspot-icon {
  transform: scale(1.1);
}

.link-hotspot-tooltip {
  /* 定位 */
  position: absolute;
  left: 100%;
  top: 14px; /* ( 60 - (16 + 2*8) ) / 2 */
  z-index: 5;
  margin-left: var(--spacing-2);

  /* 尺寸 */
  max-width: 280px;
  min-width: 120px;

  /* 間距 */
  padding: var(--spacing-3) var(--spacing-4);

  /* 視覺樣式 - 現代化設計 */
  background: var(--color-surface-base);
  backdrop-filter: var(--blur-md);
  -webkit-backdrop-filter: var(--blur-md);
  border: 1px solid var(--color-border-base);
  border-radius: var(--radius-base);
  box-shadow: var(--shadow-lg);

  /* 文字樣式 */
  font-size: var(--font-size-sm);
  color: var(--color-text-primary);
  white-space: pre-line;
  line-height: var(--line-height-relaxed);
  word-break: break-word;

  /* 顯示狀態 */
  display: block;
  opacity: 1;
  visibility: visible;
  pointer-events: none;
}

.link-hotspot-tooltip-title,
.link-hotspot-tooltip-description {
  display: none;
}

.mobile .link-hotspot {
  top: 19px; /* ( 70 - (16 + 2*8) ) / 2 */
}

/* 行動裝置上的 tooltip 調整 */
.mobile .link-hotspot-tooltip {
  max-width: 320px;
  font-size: var(--font-size-base);
  padding: var(--spacing-4);
  line-height: 1.6;
}

/* ============================================
   Info Hotspot（資訊熱點）
   ============================================ */

.info-hotspot {
  line-height: 1.2em;
  opacity: 0.9;
  -webkit-transition: opacity var(--duration-fast) var(--duration-fast);
  transition: opacity var(--duration-fast) var(--duration-fast);
}

.no-touch .info-hotspot:hover {
  opacity: 1;
  -webkit-transition: opacity var(--duration-fast);
  transition: opacity var(--duration-fast);
}

.info-hotspot.visible {
  opacity: 1;
}

/* Info Hotspot Header（標題區）*/
.info-hotspot .info-hotspot-header {
  /* 尺寸 */
  width: 40px;
  height: 40px;

  /* 視覺樣式 - 現代化設計 */
  background: var(--color-surface-base);
  backdrop-filter: var(--blur-md);
  -webkit-backdrop-filter: var(--blur-md);
  border: 1px solid var(--color-border-base);
  border-radius: 20px;
  box-shadow: var(--shadow-md);

  /* 游標 */
  cursor: pointer;

  /* 過渡效果 */
  -webkit-transition: width var(--duration-slow) var(--easing-emphasized) 0.5s,
                      border-radius var(--duration-slow) var(--easing-emphasized) 0.5s,
                      background var(--duration-base) var(--easing-standard),
                      box-shadow var(--duration-base) var(--easing-standard);
  transition: width var(--duration-slow) var(--easing-emphasized) 0.5s,
              border-radius var(--duration-slow) var(--easing-emphasized) 0.5s,
              background var(--duration-base) var(--easing-standard),
              box-shadow var(--duration-base) var(--easing-standard);
}

.mobile .info-hotspot .info-hotspot-header {
  width: 50px;
  height: 50px;
  border-radius: 25px;
}

.desktop.no-touch .info-hotspot .info-hotspot-header:hover {
  width: 260px;
  border-radius: var(--radius-base);
  background: var(--color-surface-hover);
  box-shadow: var(--shadow-lg);
  -webkit-transition: width var(--duration-slow) var(--easing-emphasized),
                      border-radius var(--duration-slow) var(--easing-emphasized),
                      background var(--duration-base) var(--easing-standard),
                      box-shadow var(--duration-base) var(--easing-standard);
  transition: width var(--duration-slow) var(--easing-emphasized),
              border-radius var(--duration-slow) var(--easing-emphasized),
              background var(--duration-base) var(--easing-standard),
              box-shadow var(--duration-base) var(--easing-standard);
}

.desktop .info-hotspot.visible .info-hotspot-header,
.desktop.no-touch .info-hotspot.visible .info-hotspot-header:hover {
  width: 260px;
  border-radius: var(--radius-base);
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
  border-bottom-left-radius: 0;
  -webkit-transition: width var(--duration-slow) var(--easing-emphasized),
                      border-radius var(--duration-slow) var(--easing-emphasized);
  transition: width var(--duration-slow) var(--easing-emphasized),
              border-radius var(--duration-slow) var(--easing-emphasized);
}

.info-hotspot .info-hotspot-icon-wrapper {
  width: 40px;
  height: 40px;
}

.mobile .info-hotspot .info-hotspot-icon-wrapper {
  width: 50px;
  height: 50px;
}

.info-hotspot .info-hotspot-icon {
  width: 90%;
  height: 90%;
  margin: 5%;
}

.info-hotspot .info-hotspot-title-wrapper {
  position: absolute;
  left: 40px;
  top: 0;
  width: 0;
  height: 40px;
  padding: 0;
  overflow: hidden;
  -webkit-transition: width 0s 0.4s,
                      padding 0s 0.4s;
  transition: width 0s 0.4s,
              padding 0s 0.4s;
}

.desktop .info-hotspot.visible .info-hotspot-title-wrapper,
.desktop.no-touch .info-hotspot .info-hotspot-header:hover .info-hotspot-title-wrapper {
  width: 220px;
  padding: 0 5px;
  -webkit-transition: width 0s 0.4s,
                      padding 0s 0.4s;
  transition: width 0s 0.4s,
              padding 0s 0.4s;
}

.info-hotspot .info-hotspot-title-wrapper:before {
  content: '';
  display: inline-block;
  vertical-align: middle;
  height: 100%;
}

.info-hotspot .info-hotspot-title {
  display: inline-block;
  vertical-align: middle;

  -moz-user-select: text;
  -webkit-user-select: text;
  -ms-user-select: text;
  user-select: text;
}

/* Info Hotspot Close Button（關閉按鈕）*/
.info-hotspot .info-hotspot-close-wrapper {
  /* 定位 */
  position: absolute;
  left: 260px;
  top: 0;
  width: 40px;
  height: 40px;

  /* 視覺樣式 */
  background: var(--color-surface-hover);
  border: 1px solid var(--color-border-base);
  border-top-right-radius: var(--radius-base);
  box-shadow: var(--shadow-sm);

  /* 顯示狀態 */
  visibility: hidden;

  /* 3D 變換 */
  -ms-transform: perspective(200px) rotateY(90deg);
  -webkit-transform: perspective(200px) rotateY(90deg);
  transform: perspective(200px) rotateY(90deg);
  -ms-transform-origin: 0 50% 0;
  -webkit-transform-origin: 0 50% 0;
  transform-origin: 0 50% 0;

  /* 過渡效果 */
  -webkit-transition: -ms-transform var(--duration-slow) var(--duration-slow),
                      -webkit-transform var(--duration-slow) var(--duration-slow),
                      transform var(--duration-slow) var(--duration-slow),
                      background var(--duration-base) var(--easing-standard),
                      visibility 0s 0.6s;
  transition: -ms-transform var(--duration-slow) var(--duration-slow),
              -webkit-transform var(--duration-slow) var(--duration-slow),
              transform var(--duration-slow) var(--duration-slow),
              background var(--duration-base) var(--easing-standard),
              visibility 0s 0.6s;
}

.desktop .info-hotspot.visible .info-hotspot-close-wrapper {
  visibility: visible;
  -ms-transform: perspective(200px) rotateY(0deg);
  -webkit-transform: perspective(200px) rotateY(0deg);
  transform: perspective(200px) rotateY(0deg);
  -webkit-transition: -ms-transform var(--duration-slow),
                      -webkit-transform var(--duration-slow),
                      transform var(--duration-slow),
                      background var(--duration-base) var(--easing-standard),
                      visibility 0s 0s;
  transition: -ms-transform var(--duration-slow),
              -webkit-transform var(--duration-slow),
              transform var(--duration-slow),
              background var(--duration-base) var(--easing-standard),
              visibility 0s 0s;
}

.desktop .info-hotspot .info-hotspot-close-wrapper:hover {
  background: rgba(239, 68, 68, 0.2);
  border-color: rgba(239, 68, 68, 0.4);
}

.info-hotspot .info-hotspot-close-icon {
  width: 70%;
  height: 70%;
  margin: 15%;
  transition: transform var(--duration-fast) var(--easing-standard);
}

.desktop .info-hotspot .info-hotspot-close-wrapper:hover .info-hotspot-close-icon {
  transform: rotate(90deg);
}

/* Info Hotspot Text（文字內容區）*/
.info-hotspot .info-hotspot-text {
  /* 定位 */
  position: absolute;
  width: 300px;
  height: auto;
  max-height: 200px;
  top: 40px;
  left: 0;

  /* 間距 */
  padding: var(--spacing-3);

  /* 視覺樣式 */
  background: var(--color-surface-base);
  backdrop-filter: var(--blur-md);
  -webkit-backdrop-filter: var(--blur-md);
  border: 1px solid var(--color-border-base);
  border-top: none;
  border-bottom-right-radius: var(--radius-base);
  border-bottom-left-radius: var(--radius-base);
  box-shadow: var(--shadow-lg);

  /* 文字樣式 */
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  line-height: var(--line-height-relaxed);

  /* 滾動 */
  overflow-y: auto;
  scrollbar-width: thin;
  scrollbar-color: rgba(255, 255, 255, 0.2) rgba(0, 0, 0, 0.2);

  /* 顯示狀態 */
  visibility: hidden;

  /* 3D 變換 */
  -ms-transform: perspective(200px) rotateX(-89.999deg);
  -webkit-transform: perspective(200px) rotateX(-89.999deg);
  transform: perspective(200px) rotateX(-89.999deg);
  -ms-transform-origin: 50% 0 0;
  -webkit-transform-origin: 50% 0 0;
  transform-origin: 50% 0 0;

  /* 過渡效果 */
  -webkit-transition: -ms-transform var(--duration-slow),
                      -webkit-transform var(--duration-slow),
                      transform var(--duration-slow),
                      visibility 0s var(--duration-slow);
  transition: -ms-transform var(--duration-slow),
              -webkit-transform var(--duration-slow),
              transform var(--duration-slow),
              visibility 0s var(--duration-slow);

  /* 文字選取 */
  -moz-user-select: text;
  -webkit-user-select: text;
  -ms-user-select: text;
  user-select: text;
}

.desktop .info-hotspot.visible .info-hotspot-text {
  visibility: visible;
  -ms-transform: perspective(200px) rotateX(0deg);
  -webkit-transform: perspective(200px) rotateX(0deg);
  transform: perspective(200px) rotateX(0deg);
  -webkit-transition: -ms-transform var(--duration-slow) var(--duration-slow),
                      -webkit-transform var(--duration-slow) var(--duration-slow),
                      transform var(--duration-slow) var(--duration-slow),
                      visibility 0s 0s;
  transition: -ms-transform var(--duration-slow) var(--duration-slow),
              -webkit-transform var(--duration-slow) var(--duration-slow),
              transform var(--duration-slow) var(--duration-slow),
              visibility 0s 0s;
}

/* 自定義滾動條（Info Hotspot Text）*/
.info-hotspot .info-hotspot-text::-webkit-scrollbar {
  width: 6px;
}

.info-hotspot .info-hotspot-text::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.2);
}

.info-hotspot .info-hotspot-text::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: var(--radius-sm);
}

.info-hotspot .info-hotspot-text::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* ============================================
   Info Hotspot Modal（行動裝置模態框）
   ============================================ */

.desktop .info-hotspot-modal {
  display: none;
}

.info-hotspot-modal {
  /* 定位 */
  top: 0;
  left: 0;
  position: absolute;
  width: 100%;
  height: 100%;
  z-index: 11000 !important;

  /* 溢出 */
  overflow: hidden;

  /* 背景遮罩 */
  background-color: rgba(0, 0, 0, 0.6);
  backdrop-filter: var(--blur-sm);
  -webkit-backdrop-filter: var(--blur-sm);

  /* 文字 */
  line-height: 1.2em;

  /* 顯示狀態 */
  opacity: 0;
  visibility: hidden;

  /* 過渡效果 */
  -webkit-transition: opacity var(--duration-fast) var(--easing-standard) 0.5s,
                      visibility 0s 0.7s;
  transition: opacity var(--duration-fast) var(--easing-standard) 0.5s,
              visibility 0s 0.7s;
}

.info-hotspot-modal.visible {
  opacity: 1;
  visibility: visible;
  -webkit-transition: opacity var(--duration-fast) var(--easing-standard),
                      visibility 0s 0s;
  transition: opacity var(--duration-fast) var(--easing-standard),
              visibility 0s 0s;
}

/* Modal Header（標題區）*/
.info-hotspot-modal .info-hotspot-header {
  /* 定位 */
  position: absolute;
  top: 60px;
  left: 10px;
  right: 10px;
  width: auto;
  height: 50px;

  /* 視覺樣式 */
  background: var(--color-surface-base);
  backdrop-filter: var(--blur-md);
  -webkit-backdrop-filter: var(--blur-md);
  border: 1px solid var(--color-border-base);
  border-radius: var(--radius-base) var(--radius-base) 0 0;
  box-shadow: var(--shadow-lg);

  /* 顯示狀態 */
  opacity: 0;

  /* 過渡效果 */
  -webkit-transition: opacity var(--duration-slow) var(--easing-standard) 0.2s;
  transition: opacity var(--duration-slow) var(--easing-standard) 0.2s;
}

.info-hotspot-modal.visible .info-hotspot-header {
  opacity: 1;
  -webkit-transition: opacity var(--duration-slow) var(--easing-standard) 0.2s;
  transition: opacity var(--duration-slow) var(--easing-standard) 0.2s;
}

.info-hotspot-modal .info-hotspot-icon-wrapper {
  width: 50px;
  height: 50px;
}

.info-hotspot-modal .info-hotspot-icon {
  width: 90%;
  height: 90%;
  margin: 5%;
}

.info-hotspot-modal .info-hotspot-title-wrapper {
  position: absolute;
  top: 0;
  left: 50px;
  right: 50px;
  width: auto;
  height: 50px;
  padding: 0 10px;
}

.info-hotspot-modal .info-hotspot-title-wrapper:before {
  content: '';
  display: inline-block;
  vertical-align: middle;
  height: 100%;
}

.info-hotspot-modal .info-hotspot-title {
  display: inline-block;
  vertical-align: middle;

  -moz-user-select: text;
  -webkit-user-select: text;
  -ms-user-select: text;
  user-select: text;
}

/* Modal Close Button（關閉按鈕）*/
.info-hotspot-modal .info-hotspot-close-wrapper {
  /* 定位 */
  position: absolute;
  top: 0;
  right: 0;
  width: 50px;
  height: 50px;

  /* 視覺樣式 */
  background: var(--color-surface-hover);
  border: 1px solid var(--color-border-base);
  border-top-right-radius: var(--radius-base);
  box-shadow: var(--shadow-sm);

  /* 游標 */
  cursor: pointer;

  /* 過渡效果 */
  transition: background var(--duration-base) var(--easing-standard);
}

.info-hotspot-modal .info-hotspot-close-wrapper:active {
  background: rgba(239, 68, 68, 0.3);
  border-color: rgba(239, 68, 68, 0.5);
}

.info-hotspot-modal .info-hotspot-close-icon {
  width: 70%;
  height: 70%;
  margin: 15%;
  transition: transform var(--duration-fast) var(--easing-standard);
}

.info-hotspot-modal .info-hotspot-close-wrapper:active .info-hotspot-close-icon {
  transform: rotate(90deg) scale(0.9);
}

/* Modal Text（文字內容區）*/
.info-hotspot-modal .info-hotspot-text {
  /* 定位 */
  position: absolute;
  top: 110px;
  bottom: 10px;
  left: 10px;
  right: 10px;

  /* 間距 */
  padding: var(--spacing-4);

  /* 視覺樣式 */
  background: var(--color-surface-base);
  backdrop-filter: var(--blur-md);
  -webkit-backdrop-filter: var(--blur-md);
  border: 1px solid var(--color-border-base);
  border-radius: 0 0 var(--radius-base) var(--radius-base);
  box-shadow: var(--shadow-lg);

  /* 文字樣式 */
  font-size: var(--font-size-base);
  color: var(--color-text-secondary);
  line-height: var(--line-height-relaxed);

  /* 滾動 */
  overflow-y: auto;
  scrollbar-width: thin;
  scrollbar-color: rgba(255, 255, 255, 0.2) rgba(0, 0, 0, 0.2);

  /* 顯示狀態 */
  opacity: 0;

  /* 過渡效果 */
  -webkit-transition: opacity var(--duration-slow) var(--easing-standard);
  transition: opacity var(--duration-slow) var(--easing-standard);

  /* 文字選取 */
  -moz-user-select: text;
  -webkit-user-select: text;
  -ms-user-select: text;
  user-select: text;
}

.info-hotspot-modal.visible .info-hotspot-text {
  opacity: 1;
  -webkit-transition: opacity var(--duration-slow) var(--easing-standard) 0.4s;
  transition: opacity var(--duration-slow) var(--easing-standard) 0.4s;
}

/* 自定義滾動條（Modal Text）*/
.info-hotspot-modal .info-hotspot-text::-webkit-scrollbar {
  width: 8px;
}

.info-hotspot-modal .info-hotspot-text::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.2);
}

.info-hotspot-modal .info-hotspot-text::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: var(--radius-sm);
}

.info-hotspot-modal .info-hotspot-text::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* View control buttons */

.viewControlButton {
  display: none;
  position: absolute;
  bottom: 0;
  left: 50%;
  width: 40px;
  height: 40px;
  padding: 5px;
  background-color: rgb(103,115,131);
  background-color: rgba(103,115,131,0.8);
}

body.view-control-buttons .viewControlButton {
  display: block;
}

/* Hide controls when width is too small */
@media (max-width: 600px) {
  body.view-control-buttons .viewControlButton {
    display: none;
  }
}

.viewControlButton .icon {
  position: absolute;
  top: 5px;
  right: 5px;
  width: 30px;
  height: 30px;
}

/* Center is at margin-left: -20px */
.viewControlButton-1 {
  margin-left: -145px;
}
.viewControlButton-2 {
  margin-left: -95px;
}
.viewControlButton-3 {
  margin-left: -45px;
}
.viewControlButton-4 {
  margin-left: 5px;
}
.viewControlButton-5 {
  margin-left: 55px;
}
.viewControlButton-6 {
  margin-left: 105px;
}

#qrToggle {
  /* 定位（由 .control-button 提供基礎樣式）*/
  position: absolute;
  top: 0;
  right: 80px;
  z-index: 30;
}

.mobile #qrToggle {
  right: 100px;
}

/* If there is a fullscreen button, QR button must be placed a bit to the left */
body.fullscreen-enabled #qrToggle {
  right: 120px;
}

body.fullscreen-enabled.mobile #qrToggle {
  right: 150px;
}

/* ============================================
   QR Code Styles
   ============================================
   QR 相關樣式已移至 app-files/styles/qr-styles.css
   以實現更好的模組化和代碼解耦
   ============================================ */

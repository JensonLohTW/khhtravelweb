* {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  -moz-user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
  -ms-text-size-adjust: none;
  -moz-text-size-adjust: none;
  -webkit-text-size-adjust: none;
  text-size-adjust: none;
  -webkit-user-drag: none;
  -webkit-touch-callout: none;
  -ms-content-zooming: none;
  -webkit-tap-highlight-color: rgba(0,0,0,0);
}

html, body {
  width: 100%;
  height: 100%;
  padding: 0;
  margin: 0;
  overflow: hidden;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-size: 16px;
  background-color: #000;
  color: #fff;
}

a, a:hover, a:active, a:visited {
  text-decoration: none;
  color: inherit;
}

#pano {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

#titleBar {
  position: absolute;
  top: 0;
  left: 40px;
  right: 152px;
  height: 40px;
  z-index: 10;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 var(--spacing-2);
}

.mobile #titleBar {
  left: 50px;
  right: 182px;
  height: 50px;
}

/* If there is a fullscreen button the title bar must make more space */
body.fullscreen-enabled #titleBar {
  right: 200px;
}

body.fullscreen-enabled.mobile #titleBar {
  right: 240px;
}

#titleBar .sceneName {
  /* 尺寸與佈局 */
  width: 100%;
  height: 100%;
  margin: 0;
  padding: var(--spacing-2) var(--spacing-4);
  line-height: 30px;

  /* 現代化視覺樣式 */
  background: var(--color-surface-base);
  backdrop-filter: var(--blur-md);
  -webkit-backdrop-filter: var(--blur-md);

  /* 邊框與陰影 */
  border-bottom: 1px solid var(--color-border-base);
  box-shadow: var(--shadow-sm);

  /* 文字樣式 - 居中對齊 */
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
  text-align: center;

  /* 文字溢出處理 */
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;

  /* 文字選取 */
  -moz-user-select: text;
  -webkit-user-select: text;
  -ms-user-select: text;
  user-select: text;

  /* 過渡效果 */
  transition: all var(--duration-base) var(--easing-standard);
}

.mobile #titleBar .sceneName {
  line-height: 40px;
  font-size: var(--font-size-lg);
  padding: var(--spacing-3) var(--spacing-4);
}

/* ============================================
   統一按鈕系統 (Unified Button System)
   參考 shadcn/ui v4 設計規範
   ============================================ */

/* === 基礎按鈕類別 (.btn) === */
.btn {
  /* 佈局 */
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-2);

  /* 文字 */
  font-family: inherit;
  font-weight: var(--font-weight-medium);
  white-space: nowrap;
  text-decoration: none;

  /* 邊框與圓角 */
  border: 1px solid transparent;
  border-radius: var(--radius-md); /* 統一圓角 8px */

  /* 互動 */
  cursor: pointer;
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;

  /* 過渡動畫 */
  transition: all var(--duration-fast) var(--easing-standard);

  /* 無障礙 */
  outline: none;
}

/* === 焦點狀態（統一） === */
.btn:focus-visible {
  outline: 2px solid var(--color-border-focus);
  outline-offset: 2px;
  box-shadow: 0 0 0 3px rgba(251, 191, 36, 0.2);
}

/* === 禁用狀態 === */
.btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  pointer-events: none;
}

/* ============================================
   尺寸變體 (Size Variants)
   ============================================ */

/* 小型 */
.btn--sm {
  height: 32px;
  padding: 0 var(--spacing-3);
  font-size: var(--font-size-sm);
  gap: var(--spacing-1-5);
}

/* 標準 */
.btn--default {
  height: 40px;
  padding: 0 var(--spacing-4);
  font-size: var(--font-size-sm);
}

/* 大型 */
.btn--lg {
  height: 48px;
  padding: 0 var(--spacing-6);
  font-size: var(--font-size-base);
}

/* 圖標按鈕（正方形） */
.btn--icon {
  width: 40px;
  height: 40px;
  padding: 0;
}

.btn--icon-sm {
  width: 32px;
  height: 32px;
  padding: 0;
}

.btn--icon-lg {
  width: 48px;
  height: 48px;
  padding: 0;
}

/* ============================================
   樣式變體 (Style Variants)
   ============================================ */

/* 主要按鈕（Default） */
.btn--primary {
  background: var(--color-surface-base);
  backdrop-filter: var(--blur-md);
  -webkit-backdrop-filter: var(--blur-md);
  border-color: var(--color-border-base);
  color: var(--color-text-primary);
  box-shadow: var(--shadow-md),
              0 0 0 1px rgba(255, 255, 255, 0.05) inset;
}

.no-touch .btn--primary:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-border-hover);
  transform: translateY(-1px);
  box-shadow: var(--shadow-lg),
              0 0 0 1px rgba(255, 255, 255, 0.08) inset;
}

.btn--primary:active {
  transform: translateY(0) scale(0.98);
  box-shadow: var(--shadow-base);
}

/* 輪廓按鈕（Outline） */
.btn--outline {
  background: transparent;
  border-color: var(--color-border-base);
  color: var(--color-text-primary);
}

.no-touch .btn--outline:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-border-hover);
}

/* 幽靈按鈕（Ghost） */
.btn--ghost {
  background: transparent;
  border-color: transparent;
  color: var(--color-text-secondary);
}

.no-touch .btn--ghost:hover {
  background: var(--color-surface-hover);
  color: var(--color-text-primary);
}

/* 危險按鈕（Destructive） */
.btn--destructive {
  background: rgba(239, 68, 68, 0.1);
  border-color: rgba(239, 68, 68, 0.3);
  color: #ef4444;
}

.no-touch .btn--destructive:hover {
  background: #ef4444;
  border-color: #ef4444;
  color: white;
  transform: scale(1.05);
}

/* 強調按鈕（Accent） - 用於 QR、媒體庫等特殊功能 */
.btn--accent {
  background: rgba(59, 130, 246, 0.15);
  backdrop-filter: var(--blur-md);
  -webkit-backdrop-filter: var(--blur-md);
  border-color: rgba(59, 130, 246, 0.25);
  color: #3b82f6;
  font-weight: var(--font-weight-semibold);
  box-shadow: var(--shadow-sm);
}

.no-touch .btn--accent:hover {
  background: rgba(59, 130, 246, 0.25);
  border-color: rgba(59, 130, 246, 0.4);
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
}

.btn--accent:active {
  transform: translateY(0);
  box-shadow: var(--shadow-sm);
}

/* 成功按鈕（Success） */
.btn--success {
  background: rgba(34, 197, 94, 0.15);
  border-color: rgba(34, 197, 94, 0.25);
  color: #22c55e;
}

.no-touch .btn--success:hover {
  background: rgba(34, 197, 94, 0.25);
  border-color: rgba(34, 197, 94, 0.4);
}

/* ============================================
   特殊狀態
   ============================================ */

/* 啟用狀態（適用於切換按鈕） */
.btn.is-active,
.btn.enabled {
  background: linear-gradient(135deg,
              rgba(251, 191, 36, 0.2),
              rgba(245, 158, 11, 0.15));
  border-color: rgba(251, 191, 36, 0.4);
  color: #fbbf24;
  box-shadow: var(--shadow-md),
              0 0 0 1px rgba(251, 191, 36, 0.1) inset;
}

.no-touch .btn.is-active:hover,
.no-touch .btn.enabled:hover {
  background: linear-gradient(135deg,
              rgba(251, 191, 36, 0.3),
              rgba(245, 158, 11, 0.25));
  border-color: rgba(251, 191, 36, 0.5);
}

/* 載入狀態 */
.btn.is-loading {
  pointer-events: none;
  opacity: 0.7;
}

/* ============================================
   響應式調整
   ============================================ */

@media (max-width: 500px) {
  .btn--default {
    height: 44px;  /* 增加觸控目標 */
  }

  .btn--icon {
    width: 44px;
    height: 44px;
  }

  .btn--icon .icon {
    width: 30px;   /* 44px 的 ~70% */
    height: 30px;
  }

  .btn--icon-lg {
    width: 48px;
    height: 48px;
  }

  .btn--icon-lg .icon {
    width: 34px;   /* 48px 的 ~70% */
    height: 34px;
  }
}

/* ============================================
   圖標樣式（支援 SVG）
   ============================================ */

.btn .icon {
  width: var(--size-icon-base);
  height: var(--size-icon-base);
  flex-shrink: 0;

  /* SVG 樣式 */
  display: block;
  margin: auto;

  /* 繼承父元素顏色 */
  color: currentColor;

  transition: opacity var(--duration-base) var(--easing-standard);
}

/* 兼容圖片圖標（如果有遺留的）*/
.btn .icon[src] {
  object-fit: contain;
  object-position: center;
}

.btn--sm .icon {
  width: var(--size-icon-sm);
  height: var(--size-icon-sm);
}

.btn--lg .icon {
  width: var(--size-icon-lg);
  height: var(--size-icon-lg);
}

/* 圖標按鈕中的圖標應該更大（佔據 70-75% 的按鈕空間）*/
.btn--icon .icon {
  width: 28px;   /* 40px 的 70% */
  height: 28px;
}

.btn--icon-sm .icon {
  width: 22px;   /* 32px 的 ~70% */
  height: 22px;
}

.btn--icon-lg .icon {
  width: 34px;   /* 48px 的 ~70% */
  height: 34px;
}

/* 圖標狀態切換（用於開關按鈕） */
.btn .icon.on {
  display: none;
}

.btn .icon.off {
  display: block;
}

.btn.is-active .icon.on,
.btn.enabled .icon.on {
  display: block;
}

.btn.is-active .icon.off,
.btn.enabled .icon.off {
  display: none;
}

/* ============================================
   無障礙與性能優化
   ============================================ */

/* 減少動畫偏好 */
@media (prefers-reduced-motion: reduce) {
  .btn,
  .btn .icon {
    transition: none;
  }

  .no-touch .btn:hover {
    transform: none;
  }
}

/* 高對比度模式 */
@media (prefers-contrast: high) {
  .btn {
    border-width: 2px;
  }

  .btn:focus-visible {
    outline-width: 3px;
  }
}

/* ============================================
   控制按鈕定位（視覺樣式由統一按鈕系統 .btn 提供）
   ============================================ */

/* === 全螢幕切換按鈕 === */
#fullscreenToggle {
  display: none;
  position: absolute;
  top: 0;
  right: 0;
  z-index: 30;
}

.mobile #fullscreenToggle {
  width: 50px;
  height: 50px;
  right: 0;
}

body.fullscreen-enabled #fullscreenToggle {
  display: block;
}

/* === 自動旋轉切換按鈕（播放）=== */
#autorotateToggle {
  display: block;
  position: absolute;
  top: 0;
  right: 0;
  z-index: 30;
}

.mobile #autorotateToggle {
  width: 50px;
  height: 50px;
  right: 0;
}

/* 有全螢幕按鈕時，播放按鈕向左移動（40px按鈕 + 8px間距）*/
body.fullscreen-enabled #autorotateToggle {
  right: 48px;
}

body.fullscreen-enabled.mobile #autorotateToggle {
  right: 58px;  /* 50px按鈕 + 8px間距 */
}

/* === 場景列表切換按鈕 === */
#sceneListToggle {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 50;
}

.mobile #sceneListToggle {
  width: 50px;
  height: 50px;
}

#sceneList {
  /* 定位 */
  position: absolute;
  top: 0;
  left: 0;
  z-index: 40;

  /* 尺寸 */
  padding-top: 40px;
  width: 220px;
  max-height: 100%;

  /* 滾動 */
  overflow-x: hidden;
  overflow-y: auto;

  /* 使用 transform 取代 margin-left（效能更好）*/
  transform: translateX(-220px);
  -webkit-transition: transform var(--duration-slow) var(--easing-emphasized);
  transition: transform var(--duration-slow) var(--easing-emphasized);
}

#sceneList.enabled {
  transform: translateX(0);
}

.mobile #sceneList {
  padding-top: 50px;
  width: 100%;
  height: 100%;
  transform: translateX(-100%);
}

.mobile #sceneList.enabled {
  transform: translateX(0);
}

#sceneList .scenes {
  /* 尺寸 */
  width: 100%;

  /* 現代化視覺樣式 */
  background: var(--color-surface-base);
  backdrop-filter: var(--blur-md);
  -webkit-backdrop-filter: var(--blur-md);

  /* 邊框與陰影 */
  border-right: 1px solid var(--color-border-base);
  box-shadow: var(--shadow-lg);
}

.mobile #sceneList .scenes {
  height: 100%;
}

#sceneList .scene {
  display: block;
  width: 100%;
  height: 30px;
}

#sceneList .sceneListActions {
  display: none;
  padding: var(--spacing-2) var(--spacing-3);
  background: rgba(30, 33, 41, 0.95);
  border-bottom: 1px solid var(--color-border-base);
  backdrop-filter: var(--blur-sm);
  -webkit-backdrop-filter: var(--blur-sm);
}

body.dev-mode #sceneList .sceneListActions {
  display: block;
}

#sceneList .sceneListActions .devOnlyButton {
  width: 100%;
  padding: var(--spacing-2) var(--spacing-3);
  background: var(--color-surface-base);
  color: var(--color-text-primary);
  border: 1px solid var(--color-border-base);
  border-radius: var(--radius-sm);
  font: inherit;
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all var(--duration-fast) var(--easing-standard);
}

#sceneList .sceneListActions .devOnlyButton:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-border-hover);
  transform: translateY(-1px);
  box-shadow: var(--shadow-sm);
}

#sceneList .sceneListActions .devOnlyButton:active {
  transform: translateY(0);
}

.mobile #sceneList .scene {
  height: 40px;
}

#sceneList .scene .text {
  /* 尺寸與佈局 */
  width: 100%;
  height: 100%;
  padding: 0 var(--spacing-4);
  line-height: 30px;

  /* 文字樣式 */
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);

  /* 文字溢出處理 */
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;

  /* 過渡效果 */
  transition: color var(--duration-fast) var(--easing-standard);
}

#sceneList .scene .sceneNameEditorInput {
  width: 100%;
  height: 100%;
  padding: 0 var(--spacing-3);
  line-height: 30px;
  box-sizing: border-box;
  border: 1px solid var(--color-border-focus);
  background-color: rgba(0, 0, 0, 0.3);
  color: var(--color-text-primary);
  font: inherit;
}

.mobile #sceneList .scene .text {
  line-height: 40px;
  font-size: var(--font-size-base);
}

.mobile #sceneList .scene .sceneNameEditorInput {
  line-height: 40px;
}

.no-touch #sceneList .scene:hover {
  background: var(--color-surface-hover);
  border-left: 3px solid var(--color-primary-400);
  padding-left: calc(var(--spacing-1) - 3px);
}

.no-touch #sceneList .scene:hover .text {
  color: var(--color-text-primary);
}

#sceneList .scene.current {
  background: linear-gradient(
    90deg,
    rgba(251, 191, 36, 0.2) 0%,
    rgba(245, 158, 11, 0.1) 100%
  );
  border-left: 3px solid var(--color-primary-500);
  padding-left: calc(var(--spacing-1) - 3px);
}

#sceneList .scene.current .text {
  color: var(--color-primary-400);
  font-weight: var(--font-weight-semibold);
}

/* 自定義滾動條樣式（場景列表）*/
#sceneList::-webkit-scrollbar {
  width: 8px;
}

#sceneList::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.2);
}

#sceneList::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: var(--radius-sm);
  transition: background var(--duration-fast) var(--easing-standard);
}

#sceneList::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* Firefox 滾動條樣式 */
#sceneList {
  scrollbar-width: thin;
  scrollbar-color: rgba(255, 255, 255, 0.2) rgba(0, 0, 0, 0.2);
}

/* Hide scene list when only a single scene exists */
body.single-scene #sceneList, body.single-scene #sceneListToggle {
  display: none;
}

/* ============================================
   Link Hotspot（導航熱點）
   ============================================ */

.link-hotspot {
  /* 尺寸 */
  width: 60px;
  height: 60px;
  margin-left: -30px;
  margin-top: -30px;

  /* 視覺樣式 */
  opacity: 0.9;

  /* 過渡效果 */
  -webkit-transition: opacity var(--duration-fast) var(--easing-standard);
  transition: opacity var(--duration-fast) var(--easing-standard);
}

.no-touch .link-hotspot:hover {
  opacity: 1;
  -webkit-transition: opacity var(--duration-base) var(--easing-standard);
  transition: opacity var(--duration-base) var(--easing-standard);
}

.mobile .link-hotspot {
  width: 70px;
  height: 70px;
}

.link-hotspot-icon {
  width: 100%;
  height: 100%;
  cursor: pointer;
  display: block;

  /* SVG 樣式 */
  color: currentColor;

  /* 防止圖片變形（僅針對 img 元素的向後兼容）*/
  object-fit: contain;
  object-position: center;

  transition: transform var(--duration-fast) var(--easing-standard);
}

.no-touch .link-hotspot:hover .link-hotspot-icon {
  transform: scale(1.1);
}

.link-hotspot-tooltip {
  /* 定位 */
  position: absolute;
  left: 100%;
  top: 14px; /* ( 60 - (16 + 2*8) ) / 2 */
  z-index: 5;
  margin-left: var(--spacing-2);

  /* 尺寸 */
  max-width: 280px;
  min-width: 120px;

  /* 間距 */
  padding: var(--spacing-3) var(--spacing-4);

  /* 視覺樣式 - 現代化設計 */
  background: var(--color-surface-base);
  backdrop-filter: var(--blur-md);
  -webkit-backdrop-filter: var(--blur-md);
  border: 1px solid var(--color-border-base);
  border-radius: var(--radius-base);
  box-shadow: var(--shadow-lg);

  /* 文字樣式 */
  font-size: var(--font-size-sm);
  color: var(--color-text-primary);
  white-space: pre-line;
  line-height: var(--line-height-relaxed);
  word-break: break-word;

  /* 顯示狀態 */
  display: block;
  opacity: 1;
  visibility: visible;
  pointer-events: none;
}

.link-hotspot-tooltip-title,
.link-hotspot-tooltip-description {
  display: none;
}

.mobile .link-hotspot {
  top: 19px; /* ( 70 - (16 + 2*8) ) / 2 */
}

/* 行動裝置上的 tooltip 調整 */
.mobile .link-hotspot-tooltip {
  max-width: 320px;
  font-size: var(--font-size-base);
  padding: var(--spacing-4);
  line-height: 1.6;
}

/* ============================================
   Info Hotspot（資訊熱點）
   ============================================ */

.info-hotspot {
  line-height: 1.2em;
  opacity: 0.9;
  -webkit-transition: opacity var(--duration-fast) var(--duration-fast);
  transition: opacity var(--duration-fast) var(--duration-fast);
}

.no-touch .info-hotspot:hover {
  opacity: 1;
  -webkit-transition: opacity var(--duration-fast);
  transition: opacity var(--duration-fast);
}

.info-hotspot.visible {
  opacity: 1;
}

/* Info Hotspot Header（標題區）*/
.info-hotspot .info-hotspot-header {
  /* 尺寸 */
  width: 40px;
  height: 40px;

  /* 視覺樣式 - 現代化設計 */
  background: var(--color-surface-base);
  backdrop-filter: var(--blur-md);
  -webkit-backdrop-filter: var(--blur-md);
  border: 1px solid var(--color-border-base);
  border-radius: 20px;
  box-shadow: var(--shadow-md);

  /* 游標 */
  cursor: pointer;

  /* 過渡效果 */
  -webkit-transition: width var(--duration-slow) var(--easing-emphasized) 0.5s,
                      border-radius var(--duration-slow) var(--easing-emphasized) 0.5s,
                      background var(--duration-base) var(--easing-standard),
                      box-shadow var(--duration-base) var(--easing-standard);
  transition: width var(--duration-slow) var(--easing-emphasized) 0.5s,
              border-radius var(--duration-slow) var(--easing-emphasized) 0.5s,
              background var(--duration-base) var(--easing-standard),
              box-shadow var(--duration-base) var(--easing-standard);
}

.mobile .info-hotspot .info-hotspot-header {
  width: 50px;
  height: 50px;
  border-radius: 25px;
}

.desktop.no-touch .info-hotspot .info-hotspot-header:hover {
  width: 260px;
  border-radius: var(--radius-base);
  background: var(--color-surface-hover);
  box-shadow: var(--shadow-lg);
  -webkit-transition: width var(--duration-slow) var(--easing-emphasized),
                      border-radius var(--duration-slow) var(--easing-emphasized),
                      background var(--duration-base) var(--easing-standard),
                      box-shadow var(--duration-base) var(--easing-standard);
  transition: width var(--duration-slow) var(--easing-emphasized),
              border-radius var(--duration-slow) var(--easing-emphasized),
              background var(--duration-base) var(--easing-standard),
              box-shadow var(--duration-base) var(--easing-standard);
}

.desktop .info-hotspot.visible .info-hotspot-header,
.desktop.no-touch .info-hotspot.visible .info-hotspot-header:hover {
  width: 260px;
  border-radius: var(--radius-base);
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
  border-bottom-left-radius: 0;
  -webkit-transition: width var(--duration-slow) var(--easing-emphasized),
                      border-radius var(--duration-slow) var(--easing-emphasized);
  transition: width var(--duration-slow) var(--easing-emphasized),
              border-radius var(--duration-slow) var(--easing-emphasized);
}

.info-hotspot .info-hotspot-icon-wrapper {
  width: 40px;
  height: 40px;
}

.mobile .info-hotspot .info-hotspot-icon-wrapper {
  width: 50px;
  height: 50px;
}

.info-hotspot .info-hotspot-icon {
  width: 90%;
  height: 90%;
  margin: 5%;
  display: block;

  /* SVG 樣式 */
  color: currentColor;

  /* 防止圖片變形（僅針對 img 元素的向後兼容）*/
  object-fit: contain;
  object-position: center;
}

.info-hotspot .info-hotspot-title-wrapper {
  position: absolute;
  left: 40px;
  top: 0;
  width: 0;
  height: 40px;
  padding: 0;
  overflow: hidden;
  -webkit-transition: width 0s 0.4s,
                      padding 0s 0.4s;
  transition: width 0s 0.4s,
              padding 0s 0.4s;
}

.desktop .info-hotspot.visible .info-hotspot-title-wrapper,
.desktop.no-touch .info-hotspot .info-hotspot-header:hover .info-hotspot-title-wrapper {
  width: 220px;
  padding: 0 5px;
  -webkit-transition: width 0s 0.4s,
                      padding 0s 0.4s;
  transition: width 0s 0.4s,
              padding 0s 0.4s;
}

.info-hotspot .info-hotspot-title-wrapper:before {
  content: '';
  display: inline-block;
  vertical-align: middle;
  height: 100%;
}

.info-hotspot .info-hotspot-title {
  display: inline-block;
  vertical-align: middle;

  -moz-user-select: text;
  -webkit-user-select: text;
  -ms-user-select: text;
  user-select: text;
}

/* Info Hotspot Close Button（關閉按鈕）*/
.info-hotspot .info-hotspot-close-wrapper {
  /* 定位 */
  position: absolute;
  left: 260px;
  top: 0;
  width: 40px;
  height: 40px;

  /* 視覺樣式 */
  background: var(--color-surface-hover);
  border: 1px solid var(--color-border-base);
  border-top-right-radius: var(--radius-base);
  box-shadow: var(--shadow-sm);

  /* 顯示狀態 */
  visibility: hidden;

  /* 3D 變換 */
  -ms-transform: perspective(200px) rotateY(90deg);
  -webkit-transform: perspective(200px) rotateY(90deg);
  transform: perspective(200px) rotateY(90deg);
  -ms-transform-origin: 0 50% 0;
  -webkit-transform-origin: 0 50% 0;
  transform-origin: 0 50% 0;

  /* 過渡效果 */
  -webkit-transition: -ms-transform var(--duration-slow) var(--duration-slow),
                      -webkit-transform var(--duration-slow) var(--duration-slow),
                      transform var(--duration-slow) var(--duration-slow),
                      background var(--duration-base) var(--easing-standard),
                      visibility 0s 0.6s;
  transition: -ms-transform var(--duration-slow) var(--duration-slow),
              -webkit-transform var(--duration-slow) var(--duration-slow),
              transform var(--duration-slow) var(--duration-slow),
              background var(--duration-base) var(--easing-standard),
              visibility 0s 0.6s;
}

.desktop .info-hotspot.visible .info-hotspot-close-wrapper {
  visibility: visible;
  -ms-transform: perspective(200px) rotateY(0deg);
  -webkit-transform: perspective(200px) rotateY(0deg);
  transform: perspective(200px) rotateY(0deg);
  -webkit-transition: -ms-transform var(--duration-slow),
                      -webkit-transform var(--duration-slow),
                      transform var(--duration-slow),
                      background var(--duration-base) var(--easing-standard),
                      visibility 0s 0s;
  transition: -ms-transform var(--duration-slow),
              -webkit-transform var(--duration-slow),
              transform var(--duration-slow),
              background var(--duration-base) var(--easing-standard),
              visibility 0s 0s;
}

.desktop .info-hotspot .info-hotspot-close-wrapper:hover {
  background: rgba(239, 68, 68, 0.2);
  border-color: rgba(239, 68, 68, 0.4);
}

.info-hotspot .info-hotspot-close-icon {
  width: 70%;
  height: 70%;
  margin: 15%;
  display: block;

  /* SVG 樣式 */
  color: currentColor;

  /* 防止圖片變形（僅針對 img 元素的向後兼容）*/
  object-fit: contain;
  object-position: center;

  transition: transform var(--duration-fast) var(--easing-standard);
}

.desktop .info-hotspot .info-hotspot-close-wrapper:hover .info-hotspot-close-icon {
  transform: rotate(90deg);
}

/* Info Hotspot Text（文字內容區）*/
.info-hotspot .info-hotspot-text {
  /* 定位 */
  position: absolute;
  width: 300px;
  height: auto;
  max-height: 200px;
  top: 40px;
  left: 0;

  /* 間距 */
  padding: var(--spacing-3);

  /* 視覺樣式 */
  background: var(--color-surface-base);
  backdrop-filter: var(--blur-md);
  -webkit-backdrop-filter: var(--blur-md);
  border: 1px solid var(--color-border-base);
  border-top: none;
  border-bottom-right-radius: var(--radius-base);
  border-bottom-left-radius: var(--radius-base);
  box-shadow: var(--shadow-lg);

  /* 文字樣式 */
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  line-height: var(--line-height-relaxed);

  /* 滾動 */
  overflow-y: auto;
  scrollbar-width: thin;
  scrollbar-color: rgba(255, 255, 255, 0.2) rgba(0, 0, 0, 0.2);

  /* 顯示狀態 */
  visibility: hidden;

  /* 3D 變換 */
  -ms-transform: perspective(200px) rotateX(-89.999deg);
  -webkit-transform: perspective(200px) rotateX(-89.999deg);
  transform: perspective(200px) rotateX(-89.999deg);
  -ms-transform-origin: 50% 0 0;
  -webkit-transform-origin: 50% 0 0;
  transform-origin: 50% 0 0;

  /* 過渡效果 */
  -webkit-transition: -ms-transform var(--duration-slow),
                      -webkit-transform var(--duration-slow),
                      transform var(--duration-slow),
                      visibility 0s var(--duration-slow);
  transition: -ms-transform var(--duration-slow),
              -webkit-transform var(--duration-slow),
              transform var(--duration-slow),
              visibility 0s var(--duration-slow);

  /* 文字選取 */
  -moz-user-select: text;
  -webkit-user-select: text;
  -ms-user-select: text;
  user-select: text;
}

.desktop .info-hotspot.visible .info-hotspot-text {
  visibility: visible;
  -ms-transform: perspective(200px) rotateX(0deg);
  -webkit-transform: perspective(200px) rotateX(0deg);
  transform: perspective(200px) rotateX(0deg);
  -webkit-transition: -ms-transform var(--duration-slow) var(--duration-slow),
                      -webkit-transform var(--duration-slow) var(--duration-slow),
                      transform var(--duration-slow) var(--duration-slow),
                      visibility 0s 0s;
  transition: -ms-transform var(--duration-slow) var(--duration-slow),
              -webkit-transform var(--duration-slow) var(--duration-slow),
              transform var(--duration-slow) var(--duration-slow),
              visibility 0s 0s;
}

/* 自定義滾動條（Info Hotspot Text）*/
.info-hotspot .info-hotspot-text::-webkit-scrollbar {
  width: 6px;
}

.info-hotspot .info-hotspot-text::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.2);
}

.info-hotspot .info-hotspot-text::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: var(--radius-sm);
}

.info-hotspot .info-hotspot-text::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* ============================================
   Info Hotspot Modal（行動裝置模態框）
   ============================================ */

.desktop .info-hotspot-modal {
  display: none;
}

.info-hotspot-modal {
  /* 定位 */
  top: 0;
  left: 0;
  position: absolute;
  width: 100%;
  height: 100%;
  z-index: 11000 !important;

  /* 溢出 */
  overflow: hidden;

  /* 背景遮罩 */
  background-color: rgba(0, 0, 0, 0.6);
  backdrop-filter: var(--blur-sm);
  -webkit-backdrop-filter: var(--blur-sm);

  /* 文字 */
  line-height: 1.2em;

  /* 顯示狀態 */
  opacity: 0;
  visibility: hidden;

  /* 過渡效果 */
  -webkit-transition: opacity var(--duration-fast) var(--easing-standard) 0.5s,
                      visibility 0s 0.7s;
  transition: opacity var(--duration-fast) var(--easing-standard) 0.5s,
              visibility 0s 0.7s;
}

.info-hotspot-modal.visible {
  opacity: 1;
  visibility: visible;
  -webkit-transition: opacity var(--duration-fast) var(--easing-standard),
                      visibility 0s 0s;
  transition: opacity var(--duration-fast) var(--easing-standard),
              visibility 0s 0s;
}

/* Modal Header（標題區）*/
.info-hotspot-modal .info-hotspot-header {
  /* 定位 */
  position: absolute;
  top: 60px;
  left: 10px;
  right: 10px;
  width: auto;
  height: 50px;

  /* 視覺樣式 */
  background: var(--color-surface-base);
  backdrop-filter: var(--blur-md);
  -webkit-backdrop-filter: var(--blur-md);
  border: 1px solid var(--color-border-base);
  border-radius: var(--radius-base) var(--radius-base) 0 0;
  box-shadow: var(--shadow-lg);

  /* 顯示狀態 */
  opacity: 0;

  /* 過渡效果 */
  -webkit-transition: opacity var(--duration-slow) var(--easing-standard) 0.2s;
  transition: opacity var(--duration-slow) var(--easing-standard) 0.2s;
}

.info-hotspot-modal.visible .info-hotspot-header {
  opacity: 1;
  -webkit-transition: opacity var(--duration-slow) var(--easing-standard) 0.2s;
  transition: opacity var(--duration-slow) var(--easing-standard) 0.2s;
}

.info-hotspot-modal .info-hotspot-icon-wrapper {
  width: 50px;
  height: 50px;
}

.info-hotspot-modal .info-hotspot-icon {
  width: 90%;
  height: 90%;
  margin: 5%;
  display: block;

  /* SVG 樣式 */
  color: currentColor;

  /* 防止圖片變形（僅針對 img 元素的向後兼容）*/
  object-fit: contain;
  object-position: center;
}

.info-hotspot-modal .info-hotspot-title-wrapper {
  position: absolute;
  top: 0;
  left: 50px;
  right: 50px;
  width: auto;
  height: 50px;
  padding: 0 10px;
}

.info-hotspot-modal .info-hotspot-title-wrapper:before {
  content: '';
  display: inline-block;
  vertical-align: middle;
  height: 100%;
}

.info-hotspot-modal .info-hotspot-title {
  display: inline-block;
  vertical-align: middle;

  -moz-user-select: text;
  -webkit-user-select: text;
  -ms-user-select: text;
  user-select: text;
}

/* Modal Close Button（關閉按鈕）*/
.info-hotspot-modal .info-hotspot-close-wrapper {
  /* 定位 */
  position: absolute;
  top: 0;
  right: 0;
  width: 50px;
  height: 50px;

  /* 視覺樣式 */
  background: var(--color-surface-hover);
  border: 1px solid var(--color-border-base);
  border-top-right-radius: var(--radius-base);
  box-shadow: var(--shadow-sm);

  /* 游標 */
  cursor: pointer;

  /* 過渡效果 */
  transition: background var(--duration-base) var(--easing-standard);
}

.info-hotspot-modal .info-hotspot-close-wrapper:active {
  background: rgba(239, 68, 68, 0.3);
  border-color: rgba(239, 68, 68, 0.5);
}

.info-hotspot-modal .info-hotspot-close-icon {
  width: 70%;
  height: 70%;
  margin: 15%;
  display: block;

  /* SVG 樣式 */
  color: currentColor;

  /* 防止圖片變形(僅針對 img 元素的向後兼容) */
  object-fit: contain;
  object-position: center;

  transition: transform var(--duration-fast) var(--easing-standard);
}

.info-hotspot-modal .info-hotspot-close-wrapper:active .info-hotspot-close-icon {
  transform: rotate(90deg) scale(0.9);
}

/* Modal Text（文字內容區）*/
.info-hotspot-modal .info-hotspot-text {
  /* 定位 */
  position: absolute;
  top: 110px;
  bottom: 10px;
  left: 10px;
  right: 10px;

  /* 間距 */
  padding: var(--spacing-4);

  /* 視覺樣式 */
  background: var(--color-surface-base);
  backdrop-filter: var(--blur-md);
  -webkit-backdrop-filter: var(--blur-md);
  border: 1px solid var(--color-border-base);
  border-radius: 0 0 var(--radius-base) var(--radius-base);
  box-shadow: var(--shadow-lg);

  /* 文字樣式 */
  font-size: var(--font-size-base);
  color: var(--color-text-secondary);
  line-height: var(--line-height-relaxed);

  /* 滾動 */
  overflow-y: auto;
  scrollbar-width: thin;
  scrollbar-color: rgba(255, 255, 255, 0.2) rgba(0, 0, 0, 0.2);

  /* 顯示狀態 */
  opacity: 0;

  /* 過渡效果 */
  -webkit-transition: opacity var(--duration-slow) var(--easing-standard);
  transition: opacity var(--duration-slow) var(--easing-standard);

  /* 文字選取 */
  -moz-user-select: text;
  -webkit-user-select: text;
  -ms-user-select: text;
  user-select: text;
}

.info-hotspot-modal.visible .info-hotspot-text {
  opacity: 1;
  -webkit-transition: opacity var(--duration-slow) var(--easing-standard) 0.4s;
  transition: opacity var(--duration-slow) var(--easing-standard) 0.4s;
}

/* 自定義滾動條（Modal Text）*/
.info-hotspot-modal .info-hotspot-text::-webkit-scrollbar {
  width: 8px;
}

.info-hotspot-modal .info-hotspot-text::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.2);
}

.info-hotspot-modal .info-hotspot-text::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: var(--radius-sm);
}

.info-hotspot-modal .info-hotspot-text::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* ============================================
   視圖控制按鈕定位（視覺樣式由統一按鈕系統 .btn 提供）
   ============================================ */

.viewControlButton {
  /* 僅保留定位樣式 */
  display: none;
  position: absolute;
  bottom: 0;
  left: 50%;
  /* 視覺樣式（尺寸、背景、邊框等）由 .btn 提供 */
}

body.view-control-buttons .viewControlButton {
  display: block;
}

/* Hide controls when width is too small */
@media (max-width: 600px) {
  body.view-control-buttons .viewControlButton {
    display: none;
  }
}

/* Center is at margin-left: -20px */
.viewControlButton-1 {
  margin-left: -145px;
}
.viewControlButton-2 {
  margin-left: -95px;
}
.viewControlButton-3 {
  margin-left: -45px;
}
.viewControlButton-4 {
  margin-left: 5px;
}
.viewControlButton-5 {
  margin-left: 55px;
}
.viewControlButton-6 {
  margin-left: 105px;
}

/* === QR 按鈕 === */
#qrToggle {
  position: absolute;
  top: 0;
  right: 48px;  /* 40px播放按鈕 + 8px間距 */
  z-index: 30;
}

.mobile #qrToggle {
  right: 58px;  /* 50px播放按鈕 + 8px間距 */
}

/* 有全螢幕按鈕時 */
body.fullscreen-enabled #qrToggle {
  right: 96px;  /* (40 + 8) × 2 */
}

body.fullscreen-enabled.mobile #qrToggle {
  right: 116px;  /* (50 + 8) × 2 */
}

/* ============================================
   QR Code Styles
   ============================================
   QR 相關樣式已移至 app-files/styles/qr-styles.css
   以實現更好的模組化和代碼解耦
   ============================================ */

/* ============================================
   媒體庫樣式 (Media Gallery Styles)
   ============================================ */

/* === 媒體庫按鈕 === */
#mediaGalleryBtn {
  position: absolute;
  top: 0;
  right: 96px;  /* (40 + 8) × 2 */
  z-index: 30;
}

.mobile #mediaGalleryBtn {
  width: 50px;
  height: 50px;
  right: 116px;  /* (50 + 8) × 2 */
}

/* 有全螢幕按鈕時 */
body.fullscreen-enabled #mediaGalleryBtn {
  right: 144px;  /* (40 + 8) × 3 */
}

body.fullscreen-enabled.mobile #mediaGalleryBtn {
  right: 174px;  /* (50 + 8) × 3 */
}

/* 媒體庫彈窗容器 */
.media-gallery-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1000;
  display: none;
  align-items: center;
  justify-content: center;
}

.media-gallery-modal[aria-hidden="false"] {
  display: flex;
}

/* 背景遮罩 */
.media-gallery-backdrop {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.85);
  backdrop-filter: var(--blur-md);
  -webkit-backdrop-filter: var(--blur-md);
  animation: fadeIn var(--transition-normal) var(--ease-out);
}

/* 媒體庫主容器 */
.media-gallery-container {
  position: relative;
  width: 90vw;
  max-width: 1200px;
  height: 85vh;
  max-height: 800px;
  background: var(--color-surface-elevated);
  backdrop-filter: var(--blur-lg);
  -webkit-backdrop-filter: var(--blur-lg);
  border-radius: var(--border-radius-lg);
  border: 1px solid var(--color-border-base);
  box-shadow: var(--shadow-2xl);
  overflow: hidden;
  animation: slideUp var(--transition-normal) var(--ease-out);
  z-index: 1001;
}

/* 關閉按鈕 - 使用統一按鈕系統 */
.media-gallery-close {
  /* 僅保留定位樣式 */
  position: absolute;
  top: var(--spacing-4);
  right: var(--spacing-4);
  z-index: 10;
  font-size: 28px;
  line-height: 1;
  /* 其他樣式由 .btn .btn--icon .btn--destructive 提供 */
}

/* 標題 */
.media-gallery-title {
  position: absolute;
  top: var(--spacing-4);
  left: var(--spacing-4);
  margin: 0;
  padding: var(--spacing-2) var(--spacing-4);
  background: var(--color-surface-base);
  backdrop-filter: var(--blur-md);
  -webkit-backdrop-filter: var(--blur-md);
  border: 1px solid var(--color-border-base);
  border-radius: var(--border-radius-md);
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
  z-index: 10;
  max-width: 50%;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* 計數器 */
.media-gallery-counter {
  position: absolute;
  bottom: var(--spacing-4);
  left: 50%;
  transform: translateX(-50%);
  padding: var(--spacing-2) var(--spacing-4);
  background: var(--color-surface-base);
  backdrop-filter: var(--blur-md);
  -webkit-backdrop-filter: var(--blur-md);
  border: 1px solid var(--color-border-base);
  border-radius: var(--border-radius-full);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-secondary);
  z-index: 10;
}

/* 媒體內容區域 */
.media-gallery-content {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

.media-gallery-item {
  max-width: 100%;
  max-height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform var(--transition-normal) var(--ease-out);
}

.media-gallery-item img {
  max-width: 90%;
  max-height: 90%;
  object-fit: contain;
  border-radius: var(--border-radius-md);
  box-shadow: var(--shadow-lg);
  user-select: none;
  -webkit-user-drag: none;
}

.media-gallery-item video {
  max-width: 90%;
  max-height: 90%;
  border-radius: var(--border-radius-md);
  box-shadow: var(--shadow-lg);
}

/* 導航按鈕 - 使用統一按鈕系統 */
.media-gallery-nav {
  /* 僅保留定位樣式 */
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  z-index: 10;
  font-size: 32px;
  line-height: 1;
  /* 其他樣式由 .btn .btn--icon-lg .btn--primary 提供 */
}

/* 特殊的 hover 效果（保持垂直居中） */
.no-touch .media-gallery-nav:hover {
  transform: translateY(-50%) translateY(-1px);
}

.media-gallery-nav:active {
  transform: translateY(-50%);
}

.media-gallery-prev {
  left: var(--spacing-4);
}

.media-gallery-next {
  right: var(--spacing-4);
}

/* 縮放控制 */
.media-gallery-zoom-controls {
  position: absolute;
  bottom: var(--spacing-4);
  right: var(--spacing-4);
  display: flex;
  gap: var(--spacing-2);
  z-index: 10;
}

/* 縮放按鈕樣式已由 .btn .btn--icon-sm .btn--sm .btn--primary 提供 */
/* zoom-reset 特殊樣式（非正方形） */
.zoom-reset {
  width: auto !important;
  font-size: var(--font-size-sm);
}

/* 動畫 */
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* 響應式設計 - 行動裝置 */
@media (max-width: 500px) {
  .media-gallery-container {
    width: 100vw;
    height: 100vh;
    max-width: 100vw;
    max-height: 100vh;
    border-radius: 0;
  }

  .media-gallery-title {
    font-size: var(--font-size-sm);
    max-width: 60%;
  }

  .media-gallery-close {
    width: 36px;
    height: 36px;
    font-size: 24px;
  }

  .media-gallery-nav {
    width: 40px;
    height: 40px;
    font-size: 24px;
  }

  .media-gallery-prev {
    left: var(--spacing-2);
  }

  .media-gallery-next {
    right: var(--spacing-2);
  }

  .media-gallery-zoom-controls {
    bottom: var(--spacing-2);
    right: var(--spacing-2);
    gap: var(--spacing-1);
  }

  .media-gallery-zoom-btn {
    width: 36px;
    height: 36px;
    font-size: var(--font-size-base);
  }

  .media-gallery-zoom-btn.zoom-reset {
    padding: 0 var(--spacing-2);
    font-size: var(--font-size-xs);
  }

  .media-gallery-counter {
    bottom: var(--spacing-2);
    font-size: var(--font-size-xs);
    padding: var(--spacing-1) var(--spacing-3);
  }

  .media-gallery-item img,
  .media-gallery-item video {
    max-width: 100%;
    max-height: 100%;
  }
}

/* 觸控裝置優化 */
@media (hover: none) and (pointer: coarse) {
  .media-gallery-nav,
  .media-gallery-close,
  .media-gallery-zoom-btn {
    /* 增加觸控目標大小 */
    min-width: 44px;
    min-height: 44px;
  }
}

/* 高解析度螢幕優化 */
@media (min-width: 1200px) {
  .media-gallery-container {
    max-width: 1400px;
    max-height: 900px;
  }
}

/* ============================================
   媒體庫樣式結束
   ============================================ */
